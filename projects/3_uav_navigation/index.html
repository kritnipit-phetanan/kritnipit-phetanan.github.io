<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> UAV State Estimation in GNSS-Denied Environments | Kritnipit Phetanan </title> <meta name="author" content="Kritnipit Phetanan"> <meta name="description" content="Sensor fusion pipeline combining Visual-Inertial Odometry (VIO) and Visual Positioning System (VPS) for reliable navigation in GPS-challenged environments"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?v=a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?v=f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?v=62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?v=591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/k_favicon.png?v=0159a6d67459a608b21c36877ef223e4"> <link rel="stylesheet" href="/assets/css/main.css?v=d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://kritnipit-phetanan.github.io/projects/3_uav_navigation/"> <script src="/assets/js/theme.js?v=48c9b5bd7f2e0605e39e579400e22553"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?v=5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Kritnipit</span> Phetanan </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">Home </a> </li> <li class="nav-item "> <a class="nav-link" href="/about/">About </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">Projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/contact/">Contact </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">UAV State Estimation in GNSS-Denied Environments</h1> <p class="post-description">Sensor fusion pipeline combining Visual-Inertial Odometry (VIO) and Visual Positioning System (VPS) for reliable navigation in GPS-challenged environments</p> </header> <article> <h2 id="overview">Overview</h2> <p>Developed a modular <strong>Visual-Inertial Odometry (VIO)</strong> framework integrated with <strong>Visual Positioning System (VPS)</strong> using a custom <strong>Error-State Extended Kalman Filter (ESKF)</strong> for UAV navigation in GNSS-denied environments. This system is designed primarily for <strong>conflict zones</strong> and areas affected by <strong>GPS jamming or anti-spoofing attacks</strong>, enabling reliable autonomous flight where satellite navigation is unavailable or compromised.</p> <hr> <h2 id="project-context">Project Context</h2> <p>I developed a complete sensor fusion pipeline for UAV localization without GPS dependency. The system combines high-frequency IMU data with camera-based visual updates to maintain accurate pose estimation in challenging environments such as urban canyons, indoor spaces, and areas with GPS jamming or interference.</p> <p>The implementation follows the <strong>OpenVINS</strong> methodology with custom extensions for VPS integration, terrain-referenced navigation, and magnetometer-based yaw correction.</p> <hr> <h2 id="system-architecture">System Architecture</h2> <pre><code class="language-mermaid">graph TD
    classDef input fill:#e1f5fe,stroke:#01579b,stroke-width:2px,color:#000000;
    classDef process fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#000000;
    classDef result fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px,color:#000000;
    classDef update fill:#fff3e0,stroke:#e65100,stroke-width:2px,color:#000000;

    subgraph Sensors ["Sensor Inputs"]
        direction LR
        A(["IMU&lt;br/&gt;(400 Hz)"])
        B(["Camera&lt;br/&gt;(20 Hz)"])
        C(["Magnetometer&lt;br/&gt;(100 Hz)"])
        D(["Barometer&lt;br/&gt;(5 Hz)"])
        P(["DEM&lt;br/&gt;(30 M Resolution)"])
    end
    
    A --&gt; E["IMU Preintegration&lt;br/&gt;(Forster et al.)"]
    E --&gt; F["ESKF State Propagation&lt;br/&gt;(18-State)"]
    
    B --&gt; G["VIO Frontend&lt;br/&gt;(KLT + Shi-Tomasi)"]
    G --&gt; H["MSCKF Backend&lt;br/&gt;(Multi-State Constraint)"]
    
    subgraph Updates ["Measurement Updates"]
        direction LR
        I["Visual Odometry&lt;br/&gt;(Relative)"]
        J["VPS Update&lt;br/&gt;(Absolute)"]
        K["Magnetometer&lt;br/&gt;(Yaw)"]
        L["AGL Estimation&lt;br/&gt;(Baro - DEM)"]
    end
    
    H --&gt; I
    P --&gt; J
    C --&gt; K
    D --&gt; L
    P --&gt; L
    
    F --&gt; M["Error-State Kalman Filter&lt;br/&gt;(Position, Velocity, Orientation,&lt;br/&gt;Gyro Bias, Accel Bias, Mag Bias)"]
    I --&gt; M
    J --&gt; M
    K --&gt; M
    L --&gt; M
    
    M --&gt; N(["State Estimate&lt;br/&gt;(Position, Velocity, Attitude)"])
    
    class A,B,C,D,P input;
    class E,F,G,H process;
    class I,J,K,L update;
    class M process;
    class N result;
</code></pre> <hr> <h2 id="key-components">Key Components</h2> <h3 id="error-state-kalman-filter-eskf">Error-State Kalman Filter (ESKF)</h3> <ul> <li> <strong>18-state formulation</strong>: Position (3), Velocity (3), Quaternion (4→3 error), Gyro Bias (3), Accel Bias (3), Mag Bias (3)</li> <li> <strong>Manifold-based error representation</strong>: Uses rotation vector (δθ) for minimal orientation error</li> <li> <strong>Covariance propagation</strong> with camera clone management for MSCKF</li> </ul> <h3 id="vio-frontend-openvins-style">VIO Frontend (OpenVINS-style)</h3> <ul> <li> <strong>Grid-based feature distribution</strong>: Ensures uniform spatial coverage</li> <li> <strong>Shi-Tomasi corner detector</strong>: Better tracking quality than ORB/FAST</li> <li> <strong>Multi-stage KLT tracking</strong>: Coarse-to-fine optical flow with quality scoring</li> <li> <strong>RANSAC-based outlier rejection</strong>: Essential matrix validation</li> </ul> <h3 id="multi-state-constraint-kalman-filter-msckf">Multi-State Constraint Kalman Filter (MSCKF)</h3> <ul> <li> <strong>Camera pose cloning</strong>: Maintains sliding window of past camera poses</li> <li> <strong>DLT triangulation</strong>: Linear least squares for initial 3D point estimation</li> <li> <strong>Gauss-Newton refinement</strong>: Nonlinear optimization for accurate feature positions</li> <li> <strong>Nullspace projection</strong>: Marginalize feature states to reduce computation</li> </ul> <h3 id="imu-preintegration">IMU Preintegration</h3> <ul> <li> <strong>On-Manifold preintegration</strong> following Forster et al. (TRO 2017)</li> <li> <strong>Bias-corrected deltas</strong>: ΔR, Δv, Δp with first-order Jacobian correction</li> <li> <strong>Covariance propagation</strong>: Tracks uncertainty through integration period</li> </ul> <h3 id="visual-positioning-system-vps-integration">Visual Positioning System (VPS) Integration</h3> <ul> <li> <strong>Absolute position updates</strong>: Correct accumulated drift periodically</li> <li> <strong>Adaptive innovation gating</strong>: Multi-tier acceptance based on drift time</li> <li> <strong>DEM-based altitude constraint</strong>: Uses terrain data for Z-axis correction</li> </ul> <h3 id="agl-above-ground-level-estimation">AGL (Above Ground Level) Estimation</h3> <ul> <li> <strong>Barometer-DEM fusion</strong>: Computes AGL = MSL (Barometer) − DEM height at current position</li> <li> <strong>Height constraint update</strong>: Provides Z-axis correction to EKF for altitude drift mitigation</li> <li> <strong>Adaptive noise scaling</strong>: Adjusts measurement uncertainty based on DEM availability and terrain variation</li> </ul> <h3 id="magnetometer-processing">Magnetometer Processing</h3> <ul> <li> <strong>Hard-iron/soft-iron calibration</strong>: Corrects sensor distortions</li> <li> <strong>EMA filtering</strong>: Smooth yaw estimates with outlier rejection</li> <li> <strong>Gyro consistency check</strong>: Validates mag readings against gyro integration</li> </ul> <hr> <h2 id="hardware-deployment">Hardware Deployment</h2> <table> <thead> <tr> <th>Platform</th> <th>Specs</th> </tr> </thead> <tbody> <tr> <td><strong>Raspberry Pi 5</strong></td> <td>ARM Cortex-A76, 8GB RAM</td> </tr> <tr> <td><strong>Orange Pi 5</strong></td> <td>RK3588S, 8GB RAM</td> </tr> </tbody> </table> <hr> <h2 id="technologies-used">Technologies Used</h2> <table> <thead> <tr> <th>Category</th> <th>Tools</th> </tr> </thead> <tbody> <tr> <td><strong>State Estimation</strong></td> <td>Custom ESKF (filterpy-based), NumPy, SciPy</td> </tr> <tr> <td><strong>Visual Odometry</strong></td> <td>OpenCV (KLT, RANSAC), Shi-Tomasi corners</td> </tr> <tr> <td><strong>IMU Processing</strong></td> <td>On-manifold preintegration, bias estimation</td> </tr> <tr> <td><strong>Terrain Data</strong></td> <td>GDAL/rasterio for DEM/DSM processing</td> </tr> <tr> <td><strong>Coordinate Systems</strong></td> <td>pyproj for UTM/lat-lon conversions</td> </tr> <tr> <td><strong>Languages</strong></td> <td>Python (primary), C++ (drivers)</td> </tr> </tbody> </table> <hr> <h2 id="key-references">Key References</h2> <ol> <li> <strong>OpenVINS</strong>: Geneva et al., “OpenVINS: A Research Platform for Visual-Inertial State Estimation”, IROS 2020</li> <li> <strong>IMU Preintegration</strong>: Forster et al., “On-Manifold Preintegration for Real-Time Visual-Inertial Odometry”, TRO 2017</li> <li> <strong>MSCKF</strong>: Mourikis &amp; Roumeliotis, “A Multi-State Constraint Kalman Filter for Vision-aided Inertial Navigation”, ICRA 2007</li> </ol> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2026 Kritnipit Phetanan. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?v=a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/mermaid@10.7.0/dist/mermaid.min.js" integrity="sha256-TtLOdUA8mstPoO6sGvHIGx2ceXrrX4KgIItO06XOn8A=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js" integrity="sha256-1rA678n2xEx7x4cTZ5x4wpUCj6kUMZEZ5cxLSVSFWxw=" crossorigin="anonymous"></script> <script defer src="/assets/js/mermaid-setup.js?v=38ca0a0126f7328d2d9a46bad640931f" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?v=85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?v=2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?v=c15de51d4bb57887caa2c21988d97279"></script> <script defer src="/assets/js/copy_code.js?v=c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?v=d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?v=a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?v=2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?v=f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?v=a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?v=6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?v=6f508d74becd347268a7f822bca7309d"></script> </body> </html>